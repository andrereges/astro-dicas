<div class="filter-container">

  <!-- ðŸ” BUSCA PRINCIPAL -->
  <div class="search-row">
    <app-search-field
      [value]="searchTextFilter"
      (valueChange)="searchTextFilter = $event"
    ></app-search-field>
  </div>

  <!-- ðŸ”½ FILTROS AVANÃ‡ADOS -->
  <mat-expansion-panel class="advanced-panel" togglePosition="after">
    <mat-expansion-panel-header>
      <mat-panel-title>
        {{ advancedFiltersLabel }}
      </mat-panel-title>
    </mat-expansion-panel-header>

    <!-- GRID DE FILTROS -->
    <div class="filters-grid">

      <app-autocomplete-field
        #channelAutocomplete
        label="Canal"
        [dataSource]="channelService"
        [displayWith]="channelLabel"
        (valueChange)="onChannelSelected($event)"
      ></app-autocomplete-field>

      <app-autocomplete-field
        #systemAutocomplete
        label="Sistema"
        [dataSource]="systemService"
        [displayWith]="systemLabel"
        (valueChange)="onSystemSelected($event)"
      ></app-autocomplete-field>

      <app-autocomplete-field
        #partAutocomplete
        label="PeÃ§a"
        [dataSource]="partService"
        [displayWith]="partLabel"
        (valueChange)="onPartSelected($event)"
      ></app-autocomplete-field>

      <app-autocomplete-field
        #brandAutocomplete
        label="Marca"
        [dataSource]="brandService"
        [displayWith]="brandLabel"
        (valueChange)="onBrandSelected($event)"
      ></app-autocomplete-field>

      <app-autocomplete-field
        #modelAutocomplete
        label="Modelo"
        [dataSource]="modelService"
        [displayWith]="modelLabel"
        [context]="{ brandId: brandFilter?.id }"
        (valueChange)="onModelSelected($event)"
      ></app-autocomplete-field>

      <app-checkbox-field
        [label]="'Somente com produto'"
        [checked]="onlyWithProductFilter"
        (checkedChange)="onlyWithProductFilter = $event"
      ></app-checkbox-field>

    </div>
  </mat-expansion-panel>

  <!-- AÃ‡ÃƒO SECUNDÃRIA -->
  <div class="advanced-actions">
    <button
      mat-stroked-button
      class="clear-filters-btn"
      (click)="cleanFilters()"
    >
      Limpar
    </button>
    <button
      mat-flat-button
      class="search-button"
      (click)="applyFilters()"
    >
      Buscar
    </button>
  </div>
</div>